.page-header
  %h1
    = link_to @project.name, project_randomization_schemes_path(@project)
    &middot;
    = @title

= form_for [@project, @randomization_scheme], html: { class: 'form-horizontal' } do |f|
  - if @randomization_scheme.errors.any?
    #error_explanation.bs-callout.bs-callout-danger
      %h4
        = pluralize(@randomization_scheme.errors.count, "error")
        prohibited this randomization scheme from being saved

      %ul
        - @randomization_scheme.errors.full_messages.each do |msg|
          %li= msg

  .form-group
    = f.label :name, nil, class: 'col-md-2 control-label'
    .col-md-10
      = f.text_field :name, class: 'form-control'

  .form-group
    = f.label :description, nil, class: 'col-md-2 control-label'
    .col-md-10
      = f.text_area :description, rows: 7, class: 'form-control'

  .form-group
    = f.label :randomization_goal, nil, class: 'col-md-2 control-label'
    .col-md-10
      = f.text_field :randomization_goal, class: 'form-control'

  .form-group
    .col-md-10.col-md-offset-2
      - if @randomization_scheme.has_randomized_subjects?
        %div.alert.alert-info
          %p
            %strong Published
          %p
            Subject randomization has started. If you need to make changes to
            treatment arms, block size multipliers, or stratification factors,
            you will need to undo all existing randomizations, and then
            unpublish the randomization scheme.
      - else
        .checkbox
          %label
            = f.check_box :published
            Published

  .form-group
    - if @randomization_scheme.published?
      .col-md-10.col-md-offset-2
        %div.alert.alert-info
          %p
            %strong Algorithm
          %p
            Subjects will be randomized using the
            %code
              = @randomization_scheme.algorithm_name
    - else
      = f.label :algorithm, nil, class: 'col-md-2 control-label'
      .col-md-10
        = f.select :algorithm, RandomizationScheme::ALGORITHMS, {}, class: 'form-control'

  .form-group
    .col-md-offset-2.col-md-10
      = f.submit nil, class: 'btn btn-primary'
      = cancel
