<!DOCTYPE html>
<html>
<head>
  <title><%= [Contour.application_name, @title].compact.join(' - ').html_safe %></title>
  <%= stylesheet_link_tag "application", media: 'all' %>
</head>
<body style="padding-top:0px">
<table class="table table-striped table-bordered" style="width:100%">
  <thead>
    <tr>
      <th>Subject</th>
      <th>Project</th>
      <th>Site</th>
      <th>Study Date</th>
      <th>Design</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><%= @sheet.subject.subject_code %></td>
      <td><%= @sheet.project.name if @sheet.project %></td>
      <td><%= @sheet.subject.site.name if @sheet.subject and @sheet.subject.site %></td>
      <td><%= @sheet.study_date %></td>
      <td><%= @sheet.design.name %></td>
    </tr>
  </tbody>
</table>

<%= simple_format @sheet.design.description %>

<table class="table table-striped table-bordered">
  <tbody>
  <% @sheet.design.variables.each_with_index do |variable, index| %>

    <% unless variable.header.blank? %>
      <% unless index == 0 %></tbody></table><table class="table table-striped table-bordered"><tbody><% end %>
      <tr><td colspan="2"><h4><%= variable.header %></h4></td></tr>
    <% end %>

    <tr>
    <td><%= variable.display_name %></td>
    <td>
      <% if variable.variable_type == 'text' %>
        <%= simple_format variable.response_name(@sheet).to_s %>
      <% elsif variable.variable_type == 'checkbox' %>
        <% variable.response_name(@sheet).each do |response| %>
          <%= response %>
        <% end %>
      <% else %>
        <%= variable.response_name(@sheet) %>
      <% end %>
    </td>
    </tr>
  <% end %>
  </tbody>
</table>
</body>
