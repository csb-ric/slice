%ul.mini-left-navigation
  %li
    = link_to @project, class: (current_page?(@project) ? 'active' : nil), rel: 'tooltip', data: { title: 'Overview', container: 'body', placement: 'right' } do
      %span.glyphicon.glyphicon-home
  %li
    = link_to project_subjects_path(@project), class: (params[:controller] == 'subjects' || params[:action] == 'subject_report' ? 'active' : nil), rel: 'tooltip', data: { title: 'Subjects', container: 'body', placement: 'right' } do
      %span.glyphicon.glyphicon-bed
  %li
    = link_to project_sheets_path(@project), class: (params[:controller] == 'sheets' ? 'active' : nil), rel: 'tooltip', data: { title: 'Sheets', container: 'body', placement: 'right' } do
      %span.glyphicon.glyphicon-duplicate
  - if @project.randomizations_enabled? && @project.randomization_schemes.count > 0 && @project.unblinded?(current_user)
    %li
      = link_to project_randomizations_path(@project), class: (params[:controller] == 'randomizations' || %w(randomize_subject randomize_subject_to_list).include?(params[:action]) ? 'active' : nil), rel: 'tooltip', data: { title: 'Randomizations', container: 'body', placement: 'right' } do
        %span.glyphicon.glyphicon-random
  - if @project.adverse_events_enabled? && @project.unblinded?(current_user)
    %li
      = link_to project_adverse_events_path(@project), class: (%w(adverse_events adverse_event_files).include?(params[:controller]) ? 'active' : nil), rel: 'tooltip', data: { title: 'Adverse Events', container: 'body', placement: 'right' } do
        %span.glyphicon.glyphicon-warning-sign{ class: current_user.unseen_adverse_events.present? ? 'text-danger' : nil }
  %li
    = link_to project_exports_path(@project), class: (params[:controller] == 'exports' ? 'active' : nil), rel: 'tooltip', data: { title: 'Exports', container: 'body', placement: 'right' } do
      %span.glyphicon.glyphicon-export
  %li
    = link_to activity_project_path(@project), class: (current_page?(activity_project_path(@project)) ? 'active' : nil), rel: 'tooltip', data: { title: 'Recent Activity', container: 'body', placement: 'right' } do
      %span.glyphicon.glyphicon-list
  %li
    = link_to share_project_path(@project), class: (current_page?(share_project_path(@project)) ? 'active' : nil), rel: 'tooltip', data: { title: 'Collaborators', container: 'body', placement: 'right' } do
      %span.glyphicon.glyphicon-user

  - if @project.editable_by? current_user
    %li
      = link_to setup_project_path(@project), class: (current_page?(setup_project_path(@project)) ? 'active' : nil), rel: 'tooltip', data: { title: 'Settings', container: 'body', placement: 'right' } do
        %span.glyphicon.glyphicon-cog

  - if setup_path?
    - if @project.editable_by?(current_user)
      %li
        = link_to project_sites_path(@project), class: (params[:controller] == 'sites' ? 'active' : nil), rel: 'tooltip', data: { title: 'Sites', container: 'body', placement: 'right' } do
          %span.glyphicon.glyphicon-tent
      %li
        = link_to project_designs_path(@project), class: (params[:controller] == 'designs' ? 'active' : nil), rel: 'tooltip', data: { title: 'Designs', container: 'body', placement: 'right' } do
          %span.glyphicon.glyphicon-list-alt
      %li
        = link_to project_variables_path(@project), class: (params[:controller] == 'variables' ? 'active' : nil), rel: 'tooltip', data: { title: 'Variables', container: 'body', placement: 'right' } do
          %span.glyphicon.glyphicon-stats
      %li
        = link_to project_domains_path(@project), class: (params[:controller] == 'domains' ? 'active' : nil), rel: 'tooltip', data: { title: 'Domains', container: 'body', placement: 'right' } do
          %span.glyphicon.glyphicon-th-list
      %li
        = link_to project_categories_path(@project), class: (params[:controller] == 'categories' ? 'active' : nil), rel: 'tooltip', data: { title: 'Categories', container: 'body', placement: 'right' } do
          %span.glyphicon.glyphicon-tags
      - if @project.randomizations_enabled? && @project.unblinded?(current_user)
        %li
          = link_to project_randomization_schemes_path(@project), class: (%w(randomization_schemes block_size_multipliers lists stratification_factors stratification_factor_options treatment_arms).include?(params[:controller]) ? 'active' : nil), rel: 'tooltip', data: { title: 'Randomization Schemes', container: 'body', placement: 'right' } do
            %span.glyphicon.glyphicon-random
      - if @project.show_documents?
        %li
          = link_to project_documents_path(@project), class: (params[:controller] == 'documents' ? 'active' : nil), rel: 'tooltip', data: { title: 'Documents', container: 'body', placement: 'right' } do
            %span.glyphicon.glyphicon-book
      - if @project.show_posts?
        %li
          = link_to project_posts_path(@project), class: (params[:controller] == 'posts' ? 'active' : nil), rel: 'tooltip', data: { title: 'News', container: 'body', placement: 'right' } do
            %span.glyphicon.glyphicon-comment
      %li
        = link_to project_links_path(@project), class: (params[:controller] == 'links' ? 'active' : nil), rel: 'tooltip', data: { title: 'Links', container: 'body', placement: 'right' } do
          %span.glyphicon.glyphicon-link
      - if @project.show_contacts?
        %li
          = link_to project_contacts_path(@project), class: (params[:controller] == 'contacts' ? 'active' : nil), rel: 'tooltip', data: { title: 'Contacts', container: 'body', placement: 'right' } do
            %span.glyphicon.glyphicon-send
