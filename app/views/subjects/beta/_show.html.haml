%h1
  %span.glyphicon.glyphicon-user
  = @subject.subject_code

- if false
  %p
    - if current_user.all_subjects.pluck(:id).include?(@subject.id)
      = link_to "Edit Subject", edit_project_subject_path(@subject.project, @subject), class: 'btn btn-default btn-xs'
      = link_to "Delete Subject", [@subject.project, @subject], method: :delete, class: 'btn btn-xs btn-danger-inverse', data: { confirm: "Are you sure you want to delete Subject #{@subject.name}?" }

- if @subject.subject_events.count == 0
  %h2
    Launch Event

  .row
    - if event = @project.events.where(scheduled: true, archived: false).order(:position).first
      .col-sm-6{ style: 'margin-bottom:20px' }
        = link_to choose_date_project_subject_path(@project, @subject, event_id: event.to_param), method: :get, class: 'btn btn-success-inverse btn-block btn-lg' do
          .text-muted Initial Event
          %span.glyphicon.glyphicon-plus
          New
          %strong.btn-text-emphasis= event.name

    .col-sm-6{ style: 'margin-bottom:20px' }
      = link_to choose_an_event_for_subject_project_subject_path(@project, @subject), method: :get, class: 'btn btn-success-inverse btn-block btn-lg' do
        .text-muted More Events
        %span.glyphicon.glyphicon-eye
        Show me
        %strong.btn-text-emphasis other events
        !
- else
  - @subject_event = @subject.subject_events.first
  .row
    .col-xs-3{ style: 'border: 1px solid blue;padding:0px' }
      = render partial: 'subjects/beta/event_navigation'

    .col-xs-9
      %p.lead=@subject_event.event_date
      %ul.list-unstyled
        - @subject_event.event.designs.each do |design|
          %li
            - sheet = @subject.sheets.where(subject_event_id: @subject_event.id, design_id: design.id).first
            - if sheet
              = link_to design.name, edit_project_sheet_path(@project, sheet)
              = coverage_helper(sheet)
            - else
              = design.name
              = link_to 'get started', new_project_sheet_path(@project, sheet: { design_id: design.id, subject_event_id: @subject_event.id }, subject_code: @subject.subject_code, subject_acrostic: @subject.acrostic, site_id: @subject.site_id)
