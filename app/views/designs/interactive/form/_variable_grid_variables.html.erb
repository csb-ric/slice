<% @option = @design.options[params[:position].to_i] %>
<% @variable = @design.variable_at(params[:position].to_i) %>
<% @select_variables = current_user.all_viewable_variables.without_variable_type(['grid']).where(project_id: @project.id).order(:name).collect{|v| [v.name, v.id]} %>

<div class="page-header">
  <h1>Edit Grid Variable Variables<span style="font-size:0.4em"><%= @variable.name %></span></h1>
</div>

<form id="variable_form" class="form-horizontal">
  <%= hidden_field_tag "variable[project_id]", @variable.project.id %>
  <div id="form_grid_variables" data-object="sortable">
    <% @variable.grid_variables.each do |grid_variable| %>
      <%= @grid_variable = grid_variable; render partial: 'variables/edit_grid_variable' %>
    <% end %>
  </div>
  <div class="btn-toolbar">
    <%= link_to 'Add Variable', '#', id: 'add_grid_variable', class: 'btn btn-mini', data: { position: 'bottom' } %>
  </div>
</form>

<hr class="soften" style="margin-top:20px;" />

<div class="button-group pull-right">
  <%= button_tag 'Update', data: { object: 'push-partial-change', target: '#variable_form', update: 'variable', position: params[:position] }, class: 'btn btn-primary' %>
  <%= button_tag 'Cancel', data: { object: 'hide-contour-modal', position: params[:position] }, class: 'btn' %>
</div>

