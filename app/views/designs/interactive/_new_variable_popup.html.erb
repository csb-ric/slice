<div class="page-header">
  <h1>
    Insert <%= params[:variable_type].to_s.titleize %> Variable
    <%= link_to 'back to variable types', '#', data: { object: 'click-and-show', path: interactive_popup_project_designs_path(@project, new: 'section_or_variable', position: params[:position]) }, class: 'btn btn-mini' %>
  </h1>
</div>

<div class="row-fluid">
  <span class="span6">
    <form id="variable_form" class="form-horizontal">
      <div class="control-group">
        <label class="control-label">Name</label>
        <div class="controls">
          <%= text_field_tag "variable[name]", '', placeholder: 'Name', autocomplete: 'off' %>
        </div>
      </div>

      <div class="control-group">
        <label class="control-label">Display Name</label>
        <div class="controls">
          <%= text_field_tag "variable[display_name]", '', placeholder: 'Display Name', style: 'width:95%', autocomplete: 'off' %>
        </div>
      </div>

      <div class="form-actions">
        <%= button_tag 'Insert', data: { object: 'partial-update-submit', target: '#variable_form', path: interactive_popup_project_designs_path(@project, create: 'variable', position: params[:position]) }, class: 'btn btn-primary' %>
      </div>
    </form>
  </span>

  <% if @project.variables.where(variable_type: params[:variable_type]).count > 0 %>
    <span class="span6">
      Or Select Existing Variable
      <%= select_tag 'variable_id', options_for_select( [['', nil]] + @project.variables.where(variable_type: params[:variable_type]).collect{|v| [v.display_name, v.id]} ), class: "chzn-select" %>
      <%= button_tag 'Insert Existing Variable', data: { object: 'partial-update-submit', target: '#variable_id', path: interactive_popup_project_designs_path(@project, add: 'variable', position: params[:position]) }, class: 'btn btn-primary' %>
    </span>
  <% end %>
</div>

<hr class="soften" style="margin-top:20px;" />

<div class="button-group pull-right">
  <%= button_tag 'Cancel', data: { object: 'hide-contour-modal', position: params[:position] }, class: 'btn' %>
</div>

