<% is_grid = defined?(grid) %>

<% response_names = sheet_variable.get_response_by_position(:name, (defined?(position) ? position : nil), variable.id) if sheet_variable %>
<% response_raws = sheet_variable.get_response_by_position(:raw, (defined?(position) ? position : nil), variable.id) if sheet_variable %>

<% if variable.alignment == 'scale' %>
  <table class="table table-hover"><col width="300px"/><%== "<col width='#{100/(variable.options_missing_at_end.size+2)}%'/>"*variable.options_missing_at_end.size %><col width="1px"/>
    <% if variable.first_scale_variable?(@sheet.design) %>
      <thead>
        <tr>
          <th></th>
          <% variable.options_missing_at_end.collect{|opt| [opt[:name], opt[:value]]}.each do |name, value| %>
            <th style="text-align:center">
              <%= value %>: <%= name %>
            </th>
          <% end %>
        </tr>
      </thead>
    <% end %>
    <tbody>
      <tr>
        <td style="font-weight:bold"><%= variable.display_name %></td>
        <% variable.options_missing_at_end.collect{|opt| [opt[:name], opt[:value], opt[:description]]}.each do |name, value, description| %>
          <td style="text-align:center" class="sheet-container">
            <% selected = (response_raws.include?(value)) %>
            <label class="checkbox checkbox-inline <%= 'selected' if selected %>">
              <%= check_box_tag "#{variable.name}[]", "#{value}", selected, disabled: true, style: 'margin-left:-14px' %>
            </label>
          </td>
        <% end %>
      </tr>
    </tbody>
  </table>
<% else %>
  <% response_names.each do |response_name| %>
    <% unless is_grid %><p><% end %>
    <span class="rounded-borders" rel="tooltip" title="<%= variable.description %>" data-placement="<%= is_grid ? 'top' : 'right' %>" data-html="true"><%= response_name %></span>
    <% unless is_grid %></p><% end %>
  <% end %>
<% end %>
