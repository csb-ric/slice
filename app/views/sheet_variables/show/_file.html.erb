<% is_grid = defined?(grid) %>

<% response = {} %>
<% response = is_grid ? sheet_variable.response_hash(position, variable.id) : sheet_variable.response_hash if sheet_variable %>

<span id="variable<%= "_#{grid.id}" if is_grid %><%= "_#{position}" if is_grid %>_<%= variable.id %>_file_container" rel="tooltip" title="<%= response[:description] %>" data-placement="<%= is_grid ? 'top' : 'right' %>" data-html="true">
  <% if response[:value] and response[:value].size > 0 %>
    <% full_url = file_project_sheet_path(@project, @sheet, sheet_variable_id: sheet_variable ? sheet_variable.id : nil, variable_id: variable.id, position: is_grid ? position : nil) %>
    <% if ['jpg', 'jpeg', 'gif', 'png'].include?(response[:value].to_s.split('.').last.to_s.downcase) %>
      <%= link_to image_tag(full_url, style: "height:64px;border:0px solid white"), full_url, target: '_blank' %>
    <% else %>
      <%= link_to response[:name], full_url, target: '_blank', class: 'btn btn-default btn-xs' %>
    <% end %>
    <%= number_to_human_size(response[:value].size) %>
  <% end %>
</span>
