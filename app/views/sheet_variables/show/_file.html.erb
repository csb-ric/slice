<% is_grid = defined?(grid) %>

<% response_name = sheet_variable.get_response_by_position(:name, (defined?(position) ? position : nil), variable.id) if sheet_variable %>
<% response_file = sheet_variable.get_response_by_position(:raw, (defined?(position) ? position : nil), variable.id) if sheet_variable %>

<span rel="tooltip" title="<%= variable.description %>" data-placement="<%= is_grid ? 'top' : 'right' %>" data-html="true">
  <% if response_file and response_file.size > 0 %>
    <% full_url = file_project_sheet_path(@project, @sheet, sheet_variable_id: sheet_variable ? sheet_variable.id : nil, variable_id: variable.id, position: defined?(position) ? position : nil) %>
    <% if ['jpg', 'jpeg', 'gif', 'png'].include?(response_name.split('.').last.to_s.downcase) %>
      <%= link_to image_tag(full_url, style: "height:64px;border:0px solid white"), full_url, target: '_blank' %>
    <% else %>
      <%= link_to response_name, full_url, target: '_blank', class: 'btn btn-default btn-xs' %>
    <% end %>
    <%= number_to_human_size(response_file.size) %>
  <% end %>
</span>
