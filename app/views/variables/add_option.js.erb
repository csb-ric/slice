$("#options").append("<%= escape_javascript(render("edit_option")) %>");

$('#option_<%= @position %> [data-object~="color-selector"]').each( function(){
  $this = $(this);
  $this.ColorPicker({
    color: $this.data('color'),
    onShow: function(colpkr){
      $(colpkr).fadeIn(500);
      return false;
    },
    onHide: function(colpkr){
      $(colpkr).fadeOut(500);
      return false;
    },
    onChange: function(hsb, hex, rgb){
      $($this.data('target')).val('#' + hex);
      $($this.data('target')+"_display").css('backgroundColor', '#' + hex);
    },
    onSubmit: function(hsb, hex, rgb, el){
      $(el).ColorPickerHide();
    }
  });
});
