.comment-outer
  .comment-left-fixed
    = image_tag @adverse_event_comment.user.avatar_url(48, "identicon"), size: "48x48", alt: ""

  .comment-right-fluid
    .comment-comment
      .comment-comment-header
        %strong= @adverse_event_comment.user.full_name
      .comment-comment-body
        = form_with model: [@project, @adverse_event, @adverse_event_comment], id: "adverse-event-comment-form" do |form|
          .form-group
            = form.text_area :description, rows: 7, class: "comment-control form-control#{" is-invalid" if @adverse_event_comment.errors[:description].present?}", placeholder: "Type comment here", data: { object: @adverse_event_comment.new_record? ? "ae-comment-comment-field" : nil }
            - if @adverse_event_comment.errors[:description].present?
              .invalid-feedback Comment can't be blank.

          - if @adverse_event_comment.new_record?
            = form.hidden_field :comment_type, value: @adverse_event_comment.comment_type.blank? ? "commented" : @adverse_event_comment.comment_type, id: "adverse_event_comment_comment_type"

          = form.submit "Comment", class: "btn btn-primary", data: { disable_with: "Comment" }
          - if @adverse_event_comment.new_record?
            - if @adverse_event.closed?
              = link_to "Reopen AE Report", "#", data: { object: "submit-ae-comment", target: "#adverse-event-comment-form", comment_type: "reopened" }, id: "reopen-ae-button", class: "btn btn-light"
            - else
              = link_to "Close AE Report", "#", data: { object: "submit-ae-comment", target: "#adverse-event-comment-form", comment_type: "closed" }, id: "close-ae-button", class: "btn btn-light"
          - else
            = link_to "Cancel", project_adverse_event_adverse_event_comment_path(@project, @adverse_event, @adverse_event_comment), remote: true, class: "btn btn-light"
